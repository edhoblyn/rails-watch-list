<% if @list.photo.attached? %>
  <div class="card-category mb-4 d-flex align-items-end"
       style="background-image: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)),
              url('<%= cl_image_path @list.photo.key, height: 500, crop: :fill %>');
              height: 350px;">
    <h1 class="text-white m-3 fw-bold"><%= @list.name %></h1>
  </div>
<% else %>
  <div class="mb-4">
    <h1><%= @list.name %></h1>
  </div>
<% end %>

<div class="mb-4 d-flex gap-4 align-items-center">
  <%= link_to "Add a movie",
              new_list_bookmark_path(@list),
              class: "btn btn-primary" %>

  <%= link_to "Edit list",
              edit_list_path(@list),
              class: "btn btn-outline-warning" %>

  <%= button_to "Delete list",
                list_path(@list),
                method: :delete,
                data: { turbo_confirm: "Are you sure you want to delete this list?" },
                class: "btn btn-outline-danger",
                form: { class: "d-inline" } %>
</div>


<div class="row">
  <% @list.bookmarks.each do |bookmark| %>
    <div class="col-12 col-md-6 mb-4">
      <div class="card shadow-sm p-3 h-100">

        <h5 class="fw-bold"><%= bookmark.movie.title %></h5>

        <% if bookmark.movie.poster_url.present? %>
          <img src="<%= bookmark.movie.poster_url %>"
               class="img-fluid mb-2"
               style="max-height: 250px; object-fit: cover;">
        <% end %>

        <p class="mb-3"><%= bookmark.comment %></p>

        <div class="d-flex gap-2">
          <%= link_to "Edit",
                      edit_bookmark_path(bookmark),
                      class: "btn btn-info btn-sm" %>

          <%= link_to "Delete",
                      bookmark_path(bookmark),
                      data: { turbo_method: :delete, turbo_confirm: "Are you sure?" },
                      class: "btn btn-danger btn-sm" %>
        </div>

      </div>
    </div>
  <% end %>
</div>
